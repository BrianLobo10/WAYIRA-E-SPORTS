<div class="blog-page">
  <section class="blog-hero">
    <div class="container">
      <div class="hero-content">
        <h1>Blog y Publicaciones</h1>
        <p>Comparte contenido, imágenes, videos y conecta con la comunidad</p>
      </div>
    </div>
  </section>

  <section class="blog-content">
    <div class="container">
      <div class="blog-header">
        <h2>Publicaciones Recientes</h2>
      </div>

      @if (loading()) {
        <div class="loading-container">
          <span class="spinner"></span>
          <span>Cargando publicaciones...</span>
        </div>
      } @else {
        @if (posts().length === 0 && isAuthenticated()) {
          <div class="empty-posts-container">
            <article class="post-card create-post-card" (click)="showCreateModal.set(true)">
              <div class="create-post-content">
                <svg width="48" height="48" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                </svg>
                <p>Crear Publicación</p>
              </div>
            </article>
            <div class="empty-state">
              <p>No hay publicaciones aún. ¡Sé el primero en compartir!</p>
            </div>
          </div>
        } @else {
          <div class="posts-grid">
            @if (isAuthenticated()) {
              <article class="post-card create-post-card" (click)="showCreateModal.set(true)">
                <div class="create-post-content">
                  <svg width="48" height="48" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                  </svg>
                  <p>Crear Publicación</p>
                </div>
              </article>
            }
            @for (post of posts(); track post.id) {
              <article class="post-card" (click)="openPost(post)">
              @if (post.images && post.images.length > 0) {
                <div class="post-image-carousel">
                  <div class="carousel-container">
                    @for (image of post.images; track $index) {
                      <div class="carousel-slide" [class.active]="$index === getCurrentImageIndex(post.id || '')">
                        <img [src]="image" [alt]="post.content">
                      </div>
                    }
                  </div>
                  @if (post.images.length > 1) {
                    <button class="carousel-btn carousel-btn-prev" (click)="prevImage(post, $event)" title="Imagen anterior">
                      <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                      </svg>
                    </button>
                    <button class="carousel-btn carousel-btn-next" (click)="nextImage(post, $event)" title="Siguiente imagen">
                      <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                      </svg>
                    </button>
                    <div class="carousel-indicators">
                      @for (image of post.images; track $index) {
                        <button 
                          class="carousel-dot" 
                          [class.active]="$index === getCurrentImageIndex(post.id || '')"
                          (click)="goToImage(post, $index, $event)"
                          [attr.aria-label]="'Ir a imagen ' + ($index + 1)">
                        </button>
                      }
                    </div>
                    <div class="carousel-counter">
                      {{ getCurrentImageIndex(post.id || '') + 1 }} / {{ post.images.length }}
                    </div>
                  }
                </div>
              } @else if (post.video) {
                <div class="post-video">
                  <video [src]="post.video" controls></video>
                </div>
              }
              <div class="post-content">
                <div class="post-header">
                  <div class="post-author">
                    @if (post.authorPhoto) {
                      <img [src]="post.authorPhoto" [alt]="post.authorName" class="author-avatar">
                    } @else {
                      <div class="author-avatar-placeholder">
                        {{ post.authorName.charAt(0).toUpperCase() }}
                      </div>
                    }
                    <a [routerLink]="['/profile', post.authorId]" class="author-name" (click)="$event.stopPropagation()">{{ post.authorName }}</a>
                  </div>
                  <div class="post-header-right">
                    <span class="post-date">{{ formatDate(post.createdAt) }}</span>
                    @if (currentUser() && post.authorId === currentUser()!.uid) {
                      <div class="post-actions">
                        <button class="post-action-btn" (click)="openEditModal(post); $event.stopPropagation()" title="Editar">
                          <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                          </svg>
                        </button>
                        <button class="post-action-btn" (click)="deletePost(post); $event.stopPropagation()" title="Eliminar">
                          <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                          </svg>
                        </button>
                      </div>
                    }
                  </div>
                </div>
                <p class="post-text">{{ post.content }}</p>
                <div class="post-stats">
                  <button class="stat-btn" (click)="likePost(post); $event.stopPropagation()" [class.liked]="isLiked(post)">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                    </svg>
                    {{ (post.likes || []).length }}
                  </button>
                  <button class="stat-btn" (click)="dislikePost(post); $event.stopPropagation()" [class.disliked]="isDisliked(post)">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                    </svg>
                    {{ (post.dislikes || []).length }}
                  </button>
                  <button class="stat-btn" (click)="openPost(post); $event.stopPropagation()">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                    </svg>
                    {{ (post.comments || []).length }}
                  </button>
                </div>
              </div>
            </article>
            }
          </div>
        }
      }
    </div>
  </section>

  <!-- Create Post Modal -->
  @if (showCreateModal()) {
    <div class="modal-overlay" (click)="closeCreateModal()">
      <div class="modal-content create-post-modal" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h3>Crear Nueva Publicación</h3>
          <button class="close-btn" (click)="closeCreateModal()" [disabled]="uploading()">
            <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
        <div class="modal-body">
          @if (isAuthenticated()) {
            <div class="post-author-info">
              @if (currentUser()?.photoURL) {
                <img [src]="currentUser()!.photoURL" [alt]="currentUser()!.displayName" class="author-avatar-small">
              } @else {
                <span class="author-avatar-placeholder-small">
                  {{ (currentUser()?.displayName || 'Usuario').charAt(0).toUpperCase() }}
                </span>
              }
              <span class="author-name-small">{{ currentUser()?.displayName || 'Usuario' }}</span>
            </div>
          }
          <textarea 
            [(ngModel)]="newPostContent" 
            placeholder="¿Qué estás pensando?"
            class="post-textarea"
            rows="8"
            [disabled]="uploading()">
          </textarea>
          
          @if (newPostImages().length > 0) {
            <div class="preview-images">
              @for (img of newPostImages(); track $index) {
                <div class="preview-image-container">
                  <img [src]="getImagePreview(img)" [alt]="img.name" class="preview-image">
                  <button class="remove-image-btn" (click)="removeImage($index)" [disabled]="uploading()">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                  </button>
                </div>
              }
            </div>
          }
          
          @if (newPostVideo()) {
            <div class="preview-video-container">
              <video [src]="getVideoPreview(newPostVideo()!)" controls class="preview-video"></video>
              <button class="remove-video-btn" (click)="removeVideo()" [disabled]="uploading()">
                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
                Eliminar video
              </button>
            </div>
          }
          
          <div class="file-uploads">
            <label class="file-label" [class.disabled]="uploading()">
              <input type="file" accept="image/*" multiple (change)="onImageSelect($event)" [disabled]="uploading()">
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
              </svg>
              <span>Agregar Imágenes</span>
            </label>
            <label class="file-label" [class.disabled]="uploading()">
              <input type="file" accept="video/*" (change)="onVideoSelect($event)" [disabled]="uploading() || !!newPostVideo()">
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
              </svg>
              <span>Agregar Video</span>
            </label>
          </div>
          
          <div class="modal-footer">
            <button class="btn-cancel" (click)="closeCreateModal()" [disabled]="uploading()">
              Cancelar
            </button>
            <button class="btn-submit" (click)="createPost()" [disabled]="uploading() || !newPostContent().trim()">
              @if (uploading()) {
                <span class="spinner-small"></span>
                <span>Publicando...</span>
              } @else {
                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                </svg>
                <span>Publicar</span>
              }
            </button>
          </div>
        </div>
      </div>
    </div>
  }

  <!-- View Post Modal -->
  @if (showPostModal() && selectedPost()) {
    <div class="modal-overlay" (click)="closePostModal()">
      <div class="post-modal-content" (click)="$event.stopPropagation()">
        <div class="post-modal-header">
          <button class="close-btn" (click)="closePostModal()">
            <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
        <div class="post-modal-body">
          <div class="post-modal-image">
            @if (selectedPost()!.images && selectedPost()!.images!.length > 0) {
              <div class="post-image-carousel-modal">
                <div class="carousel-container">
                  @for (image of selectedPost()!.images!; track $index) {
                    <div class="carousel-slide" [class.active]="$index === getCurrentImageIndex(selectedPost()!.id || '')">
                      <img [src]="image" [alt]="selectedPost()!.content">
                    </div>
                  }
                </div>
                @if (selectedPost()!.images!.length > 1) {
                  <button class="carousel-btn carousel-btn-prev" (click)="prevImage(selectedPost()!, $event)" title="Imagen anterior">
                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                    </svg>
                  </button>
                  <button class="carousel-btn carousel-btn-next" (click)="nextImage(selectedPost()!, $event)" title="Siguiente imagen">
                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                    </svg>
                  </button>
                  <div class="carousel-indicators">
                    @for (image of selectedPost()!.images!; track $index) {
                      <button 
                        class="carousel-dot" 
                        [class.active]="$index === getCurrentImageIndex(selectedPost()!.id || '')"
                        (click)="goToImage(selectedPost()!, $index, $event)"
                        [attr.aria-label]="'Ir a imagen ' + ($index + 1)">
                      </button>
                    }
                  </div>
                  <div class="carousel-counter">
                    {{ getCurrentImageIndex(selectedPost()!.id || '') + 1 }} / {{ selectedPost()!.images!.length }}
                  </div>
                }
              </div>
            } @else if (selectedPost()!.video) {
              <video [src]="selectedPost()!.video" controls></video>
            }
          </div>
          <div class="post-modal-sidebar">
            <div class="post-modal-author">
              @if (selectedPost()!.authorPhoto) {
                <img [src]="selectedPost()!.authorPhoto" [alt]="selectedPost()!.authorName" class="author-avatar">
              } @else {
                <div class="author-avatar-placeholder">
                  {{ selectedPost()!.authorName.charAt(0).toUpperCase() }}
                </div>
              }
              <a [routerLink]="['/profile', selectedPost()!.authorId]" class="author-name-link" (click)="closePostModal()">
                {{ selectedPost()!.authorName }}
              </a>
            </div>
            <div class="post-modal-comments">
              <div class="post-content-section">
                <p class="post-text">{{ selectedPost()!.content }}</p>
              </div>
              <div class="comments-section">
                <div class="comments-header">
                  <h4>Comentarios</h4>
                </div>
                <div class="comments-list">
                  @for (comment of selectedPost()!.comments || []; track $index) {
                    <div class="comment-item">
                      <div class="comment-header">
                        @if (comment.authorPhoto) {
                          <img [src]="comment.authorPhoto" [alt]="comment.authorName" class="comment-avatar">
                        } @else {
                          <div class="comment-avatar-placeholder">
                            {{ comment.authorName.charAt(0).toUpperCase() }}
                          </div>
                        }
                        <a [routerLink]="['/profile', comment.authorId]" class="comment-author-link" (click)="closePostModal()">
                          {{ comment.authorName }}
                        </a>
                      </div>
                      <p class="comment-content">{{ comment.content }}</p>
                      <div class="comment-actions">
                        <button class="comment-btn" (click)="likeComment($index)">
                          <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5" />
                          </svg>
                          <span>{{ (comment.likes || []).length }}</span>
                        </button>
                        <button class="comment-btn" (click)="dislikeComment($index)">
                          <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.736 3h4.018a2 2 0 01.485.06l3.76.94m-7 10v5a2 2 0 002 2h.096c.5 0 .905-.405.905-.904 0-.715.211-1.413.608-2.008L17 13V4m-7 10h2m5-10h2a2 2 0 012 2v6a2 2 0 01-2 2h-2.5" />
                          </svg>
                          <span>{{ (comment.dislikes || []).length }}</span>
                        </button>
                      </div>
                    </div>
                  }
                </div>
              </div>
            </div>
            <div class="post-modal-actions">
              <div class="post-reactions">
                <button class="action-btn" (click)="likePost(selectedPost()!)" [class.liked]="isLiked(selectedPost()!)">
                  <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24" [attr.fill]="isLiked(selectedPost()!) ? 'currentColor' : 'none'">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                  </svg>
                  <span>{{ (selectedPost()!.likes || []).length }}</span>
                </button>
                <button class="action-btn" (click)="dislikePost(selectedPost()!)" [class.disliked]="isDisliked(selectedPost()!)">
                  <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24" [attr.fill]="isDisliked(selectedPost()!) ? 'currentColor' : 'none'">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.736 3h4.018a2 2 0 01.485.06l3.76.94m-7 10v5a2 2 0 002 2h.096c.5 0 .905-.405.905-.904 0-.715.211-1.413.608-2.008L17 13V4m-7 10h2m5-10h2a2 2 0 012 2v6a2 2 0 01-2 2h-2.5" />
                  </svg>
                  <span>{{ (selectedPost()!.dislikes || []).length }}</span>
                </button>
              </div>
              <div class="comment-input-container">
                <input 
                  type="text" 
                  [(ngModel)]="newComment" 
                  placeholder="Añade un comentario..."
                  class="comment-input"
                  (keyup.enter)="addComment()">
                <button class="send-btn" (click)="addComment()">
                  <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  }

  <!-- Edit Post Modal -->
  @if (showEditModal()) {
    <div class="modal-overlay" (click)="closeEditModal()">
      <div class="modal-content create-post-modal" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h3>Editar Publicación</h3>
          <button class="close-btn" (click)="closeEditModal()" [disabled]="uploading()">
            <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <textarea 
            [(ngModel)]="editPostContent" 
            placeholder="¿Qué estás pensando?"
            class="post-textarea"
            rows="8"
            [disabled]="uploading()">
          </textarea>
          
          <!-- Imágenes existentes -->
          @if (existingImages().length > 0) {
            <div class="preview-images">
              @for (imageUrl of existingImages(); track imageUrl) {
                <div class="preview-image-container">
                  <img [src]="imageUrl" [alt]="'Imagen existente'" class="preview-image">
                  <button type="button" class="remove-image-btn" (click)="removeExistingImage(imageUrl)">
                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                  </button>
                </div>
              }
            </div>
          }

          <!-- Nuevas imágenes seleccionadas -->
          @if (editPostImages().length > 0) {
            <div class="preview-images">
              @for (image of editPostImages(); track $index) {
                <div class="preview-image-container">
                  <img [src]="getImagePreview(image)" [alt]="'Nueva imagen ' + $index" class="preview-image">
                  <button type="button" class="remove-image-btn" (click)="removeImage($index)">
                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                  </button>
                </div>
              }
            </div>
          }

          <!-- Video existente -->
          @if (existingVideo() && !editPostVideo()) {
            <div class="preview-video-container">
              <video [src]="existingVideo()!" controls class="preview-video"></video>
              <button type="button" class="remove-video-btn" (click)="removeExistingVideo()">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
                Eliminar Video
              </button>
            </div>
          }

          <!-- Nuevo video seleccionado -->
          @if (editPostVideo()) {
            <div class="preview-video-container">
              <video [src]="getVideoPreview(editPostVideo()!)" controls class="preview-video"></video>
              <button type="button" class="remove-video-btn" (click)="removeVideo()">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
                Eliminar Video
              </button>
            </div>
          }

          <div class="file-uploads">
            <label class="file-label">
              <input type="file" accept="image/*" multiple (change)="onImageSelect($event)" [disabled]="uploading()">
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
              </svg>
              Imágenes
            </label>
            <label class="file-label">
              <input type="file" accept="video/*" (change)="onVideoSelect($event)" [disabled]="uploading()">
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
              </svg>
              Video
            </label>
          </div>

          <div class="modal-footer">
            <button class="btn-cancel" (click)="closeEditModal()" [disabled]="uploading()">
              Cancelar
            </button>
            <button 
              class="btn-submit" 
              (click)="updatePost()" 
              [disabled]="uploading() || !editPostContent().trim()">
              @if (uploading()) {
                <span class="spinner-small"></span>
                <span>Guardando...</span>
              } @else {
                <span>Guardar Cambios</span>
              }
            </button>
          </div>
        </div>
      </div>
    </div>
  }
</div>

