<div class="twitch-container">
  <div class="twitch-header">
    <h3 class="twitch-title">
      <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24" class="twitch-icon">
        <path d="M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714Z"/>
      </svg>
      Wayira Esports en Twitch
    </h3>
    <div class="live-indicator" [class.live]="isLive()">
      <span class="live-dot"></span>
      {{ isLive() ? 'EN VIVO' : 'OFFLINE' }}
    </div>
  </div>

  <div class="twitch-embed-wrapper">
    @if (isLive() && !iframeError()) {
      <iframe
        [src]="safeTwitchUrl"
        frameborder="0"
        allowfullscreen="true"
        scrolling="no"
        allow="autoplay; fullscreen"
        class="twitch-iframe"
        (load)="onIframeLoad()"
        (error)="onIframeError()">
      </iframe>
      @if (!iframeLoaded()) {
        <div class="loading-overlay">
          <div class="loading-spinner"></div>
          <p>Cargando stream...</p>
        </div>
      }
    } @else {
      <div class="twitch-offline-content">
        <div class="offline-placeholder">
          <svg width="64" height="64" fill="currentColor" viewBox="0 0 24 24" class="offline-icon">
            <path d="M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714Z"/>
          </svg>
          <h4>{{ iframeError() ? 'Error al cargar Twitch' : 'Canal Offline' }}</h4>
          <p>{{ iframeError() ? 'No se pudo cargar el contenido de Twitch' : 'Wayira Esports no está transmitiendo en este momento' }}</p>
          <div class="offline-info">
            <p>Canal: wayiraesports</p>
            <p>Último stream disponible en Twitch</p>
          </div>
        </div>
      </div>
    }
  </div>

  <div class="twitch-actions">
    <button class="twitch-btn primary" (click)="goToTwitch()">
      <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
      Ver en Twitch
    </button>
  </div>
</div>
